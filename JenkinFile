pipeline{
    agent any
        stages{
            stage('SCM Checkout'){
                steps{
                    git branch: 'main', url: 'https://github.com/mukeshjava92/demo_counter_app.git'
                }
            }
            stage('Unit Testing'){
                steps{
                   sh 'mvn test'
                }
            }
            stage('Integration Testing'){
                steps{
                   sh 'mvn verify -DskipUnitTests'
                }
            }
            stage('Maven Build'){
                steps{
                   sh 'mvn clean install '
                }
            }
            stage('scan code'){
                steps{
                   withSonarQubeEnv(credentialsId: 'sonarqube') {
                    sh ' mvn clean package sonar:sonar'
                    }
                }
            }
        }
    
}